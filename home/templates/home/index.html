{% extends 'home/base-navbar.html' %} 
{% block title %} Home Page {% endblock %}
{% block styles %}
<style>
  .service-card,
  .booking-card {
    transition: transform 0.2s;
  }
  .service-card:hover,
  .booking-card:hover {
    transform: translateY(-5px);
  }
  .profile-img {
    width: 80px;
    height: 80px;
    object-fit: cover;
  }
  .navbar-bottom {
    position: fixed;
    bottom: 0;
    width: 100%;
    z-index: 1000;
  }
  .hero-section {
    background: linear-gradient(45deg, #007bff, #00b4d8);
    color: white;
  }
</style>
{% endblock %} {% block main-content %}
<!-- Main Content -->
<div class="container py-5 position-relative">
  <!-- Home Section -->
  <section id="home" class="mb-5">
    <div class="hero-section text-center py-5 rounded">
        <h1 class="display-4">Find Trusted Professionals</h1>
        <p class="lead">
            Book plumbers, carpenters, electricians, and more with ease.
        </p>
        <a href="#search" class="btn btn-light btn-lg mt-3">Get Started</a>
    </div>
    <div class="row mt-5">
        <div class="col-md-4 text-center">
            <i class="fas fa-search fa-2x text-primary mb-3"></i>
            <h5>Search</h5>
            <p>Find professionals by trade or location.</p>
        </div>
        <div class="col-md-4 text-center">
            <i class="fas fa-calendar-check fa-2x text-primary mb-3"></i>
            <h5>Book</h5>
            <p>Schedule services at your convenience.</p>
        </div>
        <div class="col-md-4 text-center">
            <i class="fas fa-star fa-2x text-primary mb-3"></i>
            <h5>Rate</h5>
            <p>Review and rate your experience.</p>
        </div>
        
    </div>
</section>

  <!-- Search Section -->
  <section id="search" class="mb-5">
    <h2 class="mb-4">Find Professionals</h2>
    <div class="input-group mb-3">
      <input
        type="text"
        class="form-control"
        id="searchInput"
        placeholder="Search plumbers, carpenters..."
        aria-label="Search"
      />
      <button
        class="btn btn-primary"
        type="button"
        onclick="searchProfessionals()"
      >
        <i class="fas fa-search"></i> Search
      </button>
    </div>
    <div class="d-flex flex-wrap gap-2 mb-4">
      <button
        class="btn btn-outline-primary category-filter"
        data-category="Plumber"
      >
        Plumber
      </button>
      <button
        class="btn btn-outline-primary category-filter"
        data-category="Carpenter"
      >
        Carpenter
      </button>
      <button
        class="btn btn-outline-primary category-filter"
        data-category="Electrician"
      >
        Electrician
      </button>
      <button
        class="btn btn-outline-primary category-filter"
        data-category="Painter"
      >
        Painter
      </button>
    </div>
    <div
      class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"
      id="professionalsList"
    >
      <div class="col">
        <div class="card service-card h-100">
          <div class="card-body">
            <div class="d-flex align-items-center mb-3">
              <img
                src="https://via.placeholder.com/80"
                class="rounded-circle profile-img me-3"
                alt="Profile"
              />
              <div>
                <h5 class="card-title mb-0">John Doe</h5>
                <p class="text-muted mb-0">Plumber</p>
              </div>
            </div>
            <p class="card-text">
              <i class="fas fa-star text-warning"></i> 4.8 (120 reviews)<br />
              <i class="fas fa-map-marker-alt"></i> 2 miles away<br />
              <i class="fas fa-dollar-sign"></i> $50/hr
            </p>
            <button
              class="btn btn-primary w-100"
              data-bs-toggle="modal"
              data-bs-target="#profileModal"
              onclick="showProfile('John Doe', 'Plumber', '4.8', '2 miles away', '$50/hr')"
            >
              View Profile
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Bookings Section -->
  <section id="bookings" class="mb-5">
    <h2 class="mb-4">Your Bookings</h2>
    <ul class="nav nav-tabs mb-3">
      <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#upcoming"
          >Upcoming</a
        >
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#past">Past</a>
      </li>
    </ul>
    <div class="tab-content">
      <div class="tab-pane fade show active" id="upcoming">
        <div class="card booking-card mb-3">
          <div class="card-body">
            <h5 class="card-title">Plumbing Service</h5>
            <p class="card-text">
              Professional: John Doe<br />
              Date: April 5, 2025<br />
              Status: <span class="badge bg-success">Confirmed</span>
            </p>
            <button class="btn btn-outline-primary">View Details</button>
            <button
              class="btn btn-outline-danger ms-2"
              onclick="cancelBooking('Plumbing Service')"
            >
              Cancel
            </button>
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="past">
        <div class="card booking-card mb-3">
          <div class="card-body">
            <h5 class="card-title">Carpentry Work</h5>
            <p class="card-text">
              Professional: Jane Smith<br />
              Date: March 20, 2025<br />
              Status: <span class="badge bg-secondary">Completed</span>
            </p>
            <button class="btn btn-outline-primary">Rate Service</button>
          </div>
        </div>
      </div>
    </div>
  </section>
<!-- Register as a Professional Section -->
<section id="register-professional" class="mb-5">
  <h2 class="mb-4">Register Yourself as a Professional</h2>
  <div class="card">
      <div class="card-body">
          <div class="d-flex align-items-center mb-3">
              <i class="fas fa-user-tie fa-3x text-primary me-3"></i>
              <div>
                  <h4 class="mb-0">Become a Trusted Professional</h4>
                  <p class="text-muted mb-0">Join our network of trusted professionals!</p>
              </div>
          </div>
          <button type="button" class="btn btn-primary" > <a href="{% url 'users:professional_signup' %}" class="text-white text-decoration-none">Register Now</a>
              
          </button>

          <!-- Registration Form (Initially hidden) -->
          <!-- <div id="registerForm" class="collapse mt-3">
              <form>
                  <div class="mb-3">
                      <label for="fullName" class="form-label">Full Name</label>
                      <input type="text" class="form-control" id="fullName" placeholder="Enter your full name" required />
                  </div>
                  <div class="mb-3">
                      <label for="email" class="form-label">Email</label>
                      <input type="email" class="form-control" id="email" placeholder="Enter your email" required />
                  </div>
                  <div class="mb-3">
                      <label for="phone" class="form-label">Phone</label>
                      <input type="tel" class="form-control" id="phone" placeholder="Enter your phone number" required />
                  </div>
                  <div class="mb-3">
                      <label for="service" class="form-label">Service Type</label>
                      <select class="form-select" id="service" required>
                          <option value="" disabled selected>Select your service</option>
                          <option value="plumber">Plumber</option>
                          <option value="electrician">Electrician</option>
                          <option value="carpenter">Carpenter</option>
                          <option value="other">Other</option>
                      </select>
                  </div>
                  <button type="submit" class="btn btn-primary">Submit</button>
              </form>
          </div>
      </div>
  </div> -->
</section>

<!-- Profile Modal -->
<div
  class="modal fade"
  id="profileModal"
  tabindex="-1"
  aria-labelledby="profileModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="profileModalLabel">Professional Profile</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="text-center mb-3">
          <img
            src="https://via.placeholder.com/100"
            class="rounded-circle"
            alt="Profile"
          />
          <h4 class="mt-2" id="modalName"></h4>
          <p class="text-muted" id="modalTrade"></p>
        </div>
        <p>
          <strong>Rating:</strong> <span id="modalRating"></span><br />
          <strong>Location:</strong> <span id="modalLocation"></span><br />
          <strong>Rate:</strong> <span id="modalRate"></span><br />
          <strong>Experience:</strong> 8 years<br />
          <strong>About:</strong> Experienced professional specializing in
          residential services.
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <button
          type="button"
          class="btn btn-primary"
          onclick="bookProfessional()"
        >
          Book Now
        </button>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block scripts %}
<script>
  // Sample data (replace with backend data)
  const professionals = [
    {
      name: "John Doe",
      trade: "Plumber",
      rating: "4.8",
      location: "2 miles away",
      rate: "$50/hr",
    },
    {
      name: "Jane Smith",
      trade: "Carpenter",
      rating: "4.9",
      location: "3 miles away",
      rate: "$60/hr",
    },
    {
      name: "Mike Johnson",
      trade: "Electrician",
      rating: "4.7",
      location: "1 mile away",
      rate: "$55/hr",
    },
    {
      name: "Sarah Williams",
      trade: "Painter",
      rating: "4.6",
      location: "4 miles away",
      rate: "$45/hr",
    },
  ];

  let activeFilters = new Set();

  // Search functionality
  function searchProfessionals() {
    const query = document.getElementById("searchInput").value.toLowerCase();
    filterAndDisplay(query);
  }

  // Category filter toggle
  document.querySelectorAll(".category-filter").forEach((button) => {
    button.addEventListener("click", function () {
      const category = this.getAttribute("data-category");

      // Toggle active state and filter
      if (activeFilters.has(category)) {
        activeFilters.delete(category);
        this.classList.remove("btn-primary");
        this.classList.add("btn-outline-primary");
      } else {
        activeFilters.add(category);
        this.classList.remove("btn-outline-primary");
        this.classList.add("btn-primary");
      }

      const query = document.getElementById("searchInput").value.toLowerCase();
      filterAndDisplay(query);
    });
  });

  // Filter and display professionals
  function filterAndDisplay(query = "") {
    let filtered = professionals;

    // Apply category filters if any are active
    if (activeFilters.size > 0) {
      filtered = filtered.filter((pro) => activeFilters.has(pro.trade));
    }

    // Apply search query
    if (query) {
      filtered = filtered.filter(
        (p) =>
          p.name.toLowerCase().includes(query) ||
          p.trade.toLowerCase().includes(query)
      );
    }

    displayProfessionals(filtered);
  }

  // Display professionals
  function displayProfessionals(list) {
    const container = document.getElementById("professionalsList");
    container.innerHTML = "";

    if (list.length === 0) {
      container.innerHTML =
        '<p class="text-center w-100">No professionals found matching your criteria.</p>';
      return;
    }

    list.forEach((pro) => {
      const card = `
              <div class="col">
                  <div class="card service-card h-100">
                      <div class="card-body">
                          <div class="d-flex align-items-center mb-3">
                              <img src="https://via.placeholder.com/80" class="rounded-circle profile-img me-3" alt="Profile">
                              <div>
                                  <h5 class="card-title mb-0">${pro.name}</h5>
                                  <p class="text-muted mb-0">${pro.trade}</p>
                              </div>
                          </div>
                          <p class="card-text">
                              <i class="fas fa-star text-warning"></i> ${pro.rating} (120 reviews)<br>
                              <i class="fas fa-map-marker-alt"></i> ${pro.location}<br>
                              <i class="fas fa-dollar-sign"></i> ${pro.rate}
                          </p>
                          <button class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#profileModal" 
                              onclick="showProfile('${pro.name}', '${pro.trade}', '${pro.rating}', '${pro.location}', '${pro.rate}')">
                              View Profile
                          </button>
                      </div>
                  </div>
              </div>`;
      container.innerHTML += card;
    });
  }

  // Show profile in modal
  function showProfile(name, trade, rating, location, rate) {
    document.getElementById("modalName").textContent = name;
    document.getElementById("modalTrade").textContent = trade;
    document.getElementById("modalRating").textContent =
      rating + " (120 reviews)";
    document.getElementById("modalLocation").textContent = location;
    document.getElementById("modalRate").textContent = rate;
  }

  // Book professional
  function bookProfessional() {
    alert(
      "Booking confirmed for " +
        document.getElementById("modalName").textContent
    );
    // Add backend booking logic here
  }

  // Cancel booking
  function cancelBooking(service) {
    if (confirm(`Are you sure you want to cancel ${service}?`)) {
      alert(`${service} has been canceled.`);
      // Add backend cancel logic here
    }
  }

  // Logout
  function logout() {
    if (confirm("Are you sure you want to logout?")) {
      alert("Logged out successfully.");
      // Add logout logic here
    }
  }

  // Initial load
  document.addEventListener("DOMContentLoaded", () => filterAndDisplay());

  // Add event listener for search input
  document
    .getElementById("searchInput")
    .addEventListener("input", searchProfessionals);
</script>

{% endblock %}
